<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>æˆ¿å‹™å¾Œå°</title>

<style>
body{font-family:"Noto Sans TC";background:#f5f5f5;margin:0;}
header{background:#000;color:#fff;padding:16px;text-align:center;font-size:22px;}
table{width:100%;border-collapse:collapse;margin-top:10px;}
td,th{padding:10px;border-bottom:1px solid #ddd;}
.btn{padding:6px 12px;border-radius:6px;color:#fff;border:none;}
.stay{background:#4285F4;} .out{background:#E53935;} .cancel{background:#777;}
</style>

</head>
<body>
<header>ğŸ¨ æˆ¿å‹™ç®¡ç†</header>

<table id="tb"></table>

<script>
const API="YOUR_GAS_URL";

async function load(){
  const res=await fetch(API+"?action=listBookings").then(r=>r.json());
  tb.innerHTML="<tr><th>è¨‚å–®</th><th>æˆ¿å‹</th><th>å…¥ä½</th><th>ç‹€æ…‹</th><th>æ“ä½œ</th></tr>"+
  res.map(b=>`
    <tr>
      <td>${b.order_id}</td><td>${b.room_id}</td><td>${b.checkin}</td><td>${b.status}</td>
      <td>
        <button class="btn stay" onclick="setStatus('${b.order_id}','å·²å…¥ä½')">å…¥ä½</button>
        <button class="btn out" onclick="setStatus('${b.order_id}','å·²é›¢æˆ¿')">é€€æˆ¿</button>
        <button class="btn cancel" onclick="setStatus('${b.order_id}','å–æ¶ˆ')">å–æ¶ˆ</button>
      </td>
    </tr>
  `).join("");
}
load();

async function setStatus(id,status){
  await fetch(API+"?action=updateStatus",{method:"POST",body:JSON.stringify({id,status})});
  load();
}
</script>
</body>
</html>
